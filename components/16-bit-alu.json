{
  "id": "ALU_16BIT",
  "name": "16-Bit ALU",
  "category": "Arithmetic",
  "description": "16-bit ALU with ADD, SUB, AND, OR, XOR, NOT operations",
  "pins": {
    "inputs": [
      { "x": -55, "y": -80, "label": "A0" },
      { "x": -55, "y": -70, "label": "A1" },
      { "x": -55, "y": -60, "label": "A2" },
      { "x": -55, "y": -50, "label": "A3" },
      { "x": -55, "y": -40, "label": "A4" },
      { "x": -55, "y": -30, "label": "A5" },
      { "x": -55, "y": -20, "label": "A6" },
      { "x": -55, "y": -10, "label": "A7" },
      { "x": -55, "y": 0, "label": "A8" },
      { "x": -55, "y": 10, "label": "A9" },
      { "x": -55, "y": 20, "label": "A10" },
      { "x": -55, "y": 30, "label": "A11" },
      { "x": -55, "y": 40, "label": "A12" },
      { "x": -55, "y": 50, "label": "A13" },
      { "x": -55, "y": 60, "label": "A14" },
      { "x": -55, "y": 70, "label": "A15" },
      { "x": -35, "y": -80, "label": "B0" },
      { "x": -35, "y": -70, "label": "B1" },
      { "x": -35, "y": -60, "label": "B2" },
      { "x": -35, "y": -50, "label": "B3" },
      { "x": -35, "y": -40, "label": "B4" },
      { "x": -35, "y": -30, "label": "B5" },
      { "x": -35, "y": -20, "label": "B6" },
      { "x": -35, "y": -10, "label": "B7" },
      { "x": -35, "y": 0, "label": "B8" },
      { "x": -35, "y": 10, "label": "B9" },
      { "x": -35, "y": 20, "label": "B10" },
      { "x": -35, "y": 30, "label": "B11" },
      { "x": -35, "y": 40, "label": "B12" },
      { "x": -35, "y": 50, "label": "B13" },
      { "x": -35, "y": 60, "label": "B14" },
      { "x": -35, "y": 70, "label": "B15" },
      { "x": -15, "y": 90, "label": "OP0" },
      { "x": 0, "y": 90, "label": "OP1" },
      { "x": 15, "y": 90, "label": "OP2" }
    ],
    "outputs": [
      { "x": 55, "y": -80, "label": "R0" },
      { "x": 55, "y": -70, "label": "R1" },
      { "x": 55, "y": -60, "label": "R2" },
      { "x": 55, "y": -50, "label": "R3" },
      { "x": 55, "y": -40, "label": "R4" },
      { "x": 55, "y": -30, "label": "R5" },
      { "x": 55, "y": -20, "label": "R6" },
      { "x": 55, "y": -10, "label": "R7" },
      { "x": 55, "y": 0, "label": "R8" },
      { "x": 55, "y": 10, "label": "R9" },
      { "x": 55, "y": 20, "label": "R10" },
      { "x": 55, "y": 30, "label": "R11" },
      { "x": 55, "y": 40, "label": "R12" },
      { "x": 55, "y": 50, "label": "R13" },
      { "x": 55, "y": 60, "label": "R14" },
      { "x": 55, "y": 70, "label": "R15" },
      { "x": -15, "y": -95, "label": "Z" },
      { "x": 0, "y": -95, "label": "C" },
      { "x": 15, "y": -95, "label": "N" }
    ]
  },
  "logic": {
    "code": "let a = 0, b = 0;\nfor (let i = 0; i < 16; i++) {\n  if (inputs[i].getValue()) a |= (1 << i);\n  if (inputs[i + 16].getValue()) b |= (1 << i);\n}\nconst op = (inputs[34].getValue() ? 4 : 0) + (inputs[33].getValue() ? 2 : 0) + (inputs[32].getValue() ? 1 : 0);\nlet result = 0, carry = false;\nswitch(op) {\n  case 0: result = a + b; carry = result > 65535; result &= 0xFFFF; break;\n  case 1: result = (a - b + 65536) & 0xFFFF; carry = a < b; break;\n  case 2: result = a & b; break;\n  case 3: result = a | b; break;\n  case 4: result = a ^ b; break;\n  case 5: result = (~a) & 0xFFFF; break;\n  case 6: result = a << 1; carry = (a & 0x8000) !== 0; result &= 0xFFFF; break;\n  case 7: result = a >> 1; carry = (a & 1) !== 0; break;\n}\nfor (let i = 0; i < 16; i++) {\n  outputs[i].setValue((result >> i) & 1);\n}\noutputs[16].setValue(result === 0);\noutputs[17].setValue(carry);\noutputs[18].setValue((result & 0x8000) !== 0);"
  },
  "rendering": {
    "type": "gate",
    "shape": "rounded-rect",
    "width": 110,
    "height": 200,
    "label": "ALU16"
  }
}
